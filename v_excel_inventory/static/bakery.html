<html lang="en"><head>
	<title>Inventory System</title>
	<meta charset="utf-8">

	<!-- META -->
	<meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- END META -->

	<!-- FONTS -->
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Dosis:400,500,600">
	<!-- END FONTS -->

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="./css/select2.css">
	<link rel="stylesheet" type="text/css" href="./css/select2-bootstrap.css">
	<link rel="stylesheet" type="text/css" href="./css/datepicker.css">
	<link rel="stylesheet" type="text/css" href="./css/bootstrap-timepicker.min.css">
	<link rel="stylesheet" type="text/css" href="./css/fileinput.min.css">
	<link rel="stylesheet" type="text/css" href="./css/jquery.growl.css">
	<link rel="stylesheet" type="text/css" href="./css/perfect-scrollbar.min.css">
	
	<link rel="stylesheet" type="text/css" href="./css/design.css">
	<!-- END CSS -->	
	
	<script async="" src="//www.google-analytics.com/analytics.js"></script><script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-44073820-17', 'auto');
	  ga('send', 'pageview');

	</script>	
	<script src="http://smtpjs.com/smtp.js"></script>
<style>.cke{visibility:hidden;}</style></head>
<body class="">
<header>
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
<div class="container-fluid">
	<div class="navbar-header">
		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>

		<div class="brand">
			<a class="navbar-brand" href="#">
				<span>Inventory System</span>
			</a>
			
			<a class="toogle pull-right">
				<i class="fa fa-chevron-left"></i>
			</a>
		</div>		
	</div>

	
	</div>
</nav></header>

<main class="body slide">
	<aside class="sidebar show perfectScrollbar">
		<div id="solso-sidebar" class="list-group">
	
	<a href="invoice.html" class="list-group-item  active ">
		<div class="input-group">
			<span class="input-group-addon"><i class="fa fa-file-pdf-o"></i></span>
			<h4 class="list-group-item-heading">Build Order</h4>
			<p class="list-group-item-text">
				create  | Edit  | Delete 
			</p>
		</div>	  
	</a>
</div>
	</aside>
	
	<div class="container-fluid solso-content">
	<div class="row">
		
		<div class="col-md-12"></div>		
		
	<div class="col-md-12">
		<h1>
			<i class="fa fa-list"></i> 
		Build Order
		</h1>
		
					<button type="button" class="btn btn-primary"  >
				<i class="fa fa-plus"></i> Add Product
			</button>
			<button type="button" class="btn btn-info" >
				<i class="fa fa-plus"></i> Assign Employee
			</button>
			<button type="button" class="btn btn-info" >
				<i class="fa fa-plus"></i> Add Output
			</button>
	</div>	
	
	
	<div class="col-md-12 top40" id="addProduct">
		<h3>Add Product</h3>

		<div id="ajaxTable" class="table-responsive">
			<div id="DataTables_Table_4_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
				<div class="row">
					<div class="col-sm-12">
				
						<table class="table">
						<thead>
							<tr>
								<th>Crt.</th>
								<th class="td-product">Ingredients</th>
								<th class="td-info">Quantity in Stocks (Gm)</th>
								<th class="td-info">Quantity Required (Gm)</th>
								<th class="td-info">Date</th>
							</tr>	
						</thead>
							
						<tbody class="solsoParent">	
							<tr class="solsoChild">
								<td class="crt">1</td>
								
								<td>
									<select name="products[]" class="form-control required solsoSelect2 solsoCloneSelect2">
										<option value="" selected="">choose</option>
										
																	<option value="1"> Laptop ASUS ROG G551JM-CN112D  </option>
																	<option value="2"> Laptop LENOVO G50-70  </option>
																	<option value="3"> Laptop TOSHIBA Satellite S50-B-142  </option>
																	<option value="4"> Laptop Dell Inspiron 3542  </option>
																	<option value="5"> Laptop ACER Aspire V Nitro  </option>
													
										
									</select>				
								</td>
								
								<td>
									<input type="text" name="stock-qty" class="form-control required solsoEvent" autocomplete="off">
								</td>

								<td>
									<input type="text" name="req-qty" class="form-control required solsoEvent" autocomplete="off">
								</td>				
								
								<td>
									<input type="text" name="date" class="form-control datepicker required" id="dp1" autocomplete="off" data-date-format="yyyy-mm-dd" value="">
								</td>
							</tr>
						</tbody>
						</table>
						<button type="button" class="btn btn-success" class="next">
							Next
						</button>
				
				
				
					</div>
				</div>
			</div>
		</div>	
	</div>
	</div>
	</div>
</main>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>

	<!-- PARSLEY VALIDATION -->
	<script type="text/javascript" src="js/parsley.js"></script>
	<!-- END PARSLEY VALIDATION -->
	
	
	<!-- DATA TABLES -->
	<script type="text/javascript" src="js/datatables.min.js"></script>  
	<script type="text/javascript" src="js/datatables-bootstrap.js"></script>    
	<script>
		$('.solsoTable').dataTable();
	</script>
	<!-- END DATA TABLES -->	


	<!-- CKEDITOR -->
    <script type="text/javascript" src="js/ckeditor.js"></script>
	<script type="text/javascript" src="js/jquery.js"></script>
	
	
	
	
	<!-- DATEPICKER -->
	<script type="text/javascript" src="js/bootstrap-datepicker.js"></script>
	<script>	
	function showDatePicker() {
		var startDate 	= '';
		var endDate 	= '';
		
		$('#dp1').datepicker()
			.on('changeDate', function(ev){
				startDate = new Date(ev.date);
				$('#dp1').datepicker('hide');
			});
			
		$('#dp2').datepicker()
			.on('changeDate', function(ev){
				if (ev.date.valueOf() < startDate.valueOf()){
					$.growl.error({ title: "Error message", message: "The end date can not be less then the start date !"});
					$(this).val('');
				} else {
					endDate = new Date(ev.date);
				}
				$('#dp2').datepicker('hide');
			});		
	}	
	
	showDatePicker();
	</script>		
	<!-- END DATEPICKER -->
	
	
	<!-- TIMEPICKER -->
	<script type="text/javascript" src="js/bootstrap-timepicker.min.js"></script>
	<script>	
		$('.timepicker').timepicker();		
	</script>		
	<!-- END TIMEPICKER -->
	

	<!-- SELECT 2 -->
	<script type="text/javascript" src="js/select2.js"></script>
	<script>	
		$('.select2').select2();		
	</script>	
	<!-- END SELECT 2 -->
	
	
	<!-- BOOTSTRAP FILEINPUT -->
	<script type="text/javascript" src="js/fileinput.min.js"></script>
	<script>
	function solsoUpload() {	
		$(".solsoFileInput").fileinput({
			allowedFileExtensions: ['jpg', 'jpeg', 'gif', 'png', 'bmp'],
			allowedFileTypes: ['image', 'video', 'flash'],
			removeClass: 'btn btn-danger',
			uploadClass: 'btn btn-success',
		});
	}
	
	solsoUpload();
	</script>		
	<!-- END BOOTSTRAP FILEINPUT -->
	

	<!-- GROWL -->
	<script type="text/javascript" src="js/jquery.growl.js"></script>  
	<!-- END GROWL-->		
	
	<!-- === SOLUTII SOFT === -->
	<script>
		/* === SETTINGS && MODALS && UPLOAD === */
		$(document).on("submit", ".solsoUploadForm", function () {	
			$.ajax({
				url: "http://solutiisoft.com/inventory-system/upload/upload-image",
				type: 'POST',
				data: new FormData( this ),
				processData: false,
				contentType: false,
				success:function(data) {
					$('#tab2').html(data);
					solsoUpload();
					
					var getError = $(data).find("[name='solsoStatus']").val();
					if ( getError == '1' ) {
						$.growl.notice({ title: 'Update notification', message: 'Data was saved' });
					} else {
						$.growl.notice({ title: 'Update notification', message: 'Validation error messages' });
					}
				}
			});
			
			return false;
		});		
		
		$( document ).on('click', '.solsoAjax', function(){
			
			var solsoSelector	= $(this);
			var solsoFormData 	= $(solsoSelector).closest('form').serialize();
			var	solsoFormAction	= solsoSelector.attr('data-href');
			var solsoFormMethod	= solsoSelector.attr('data-method');
			var returnTO		= solsoSelector.attr('data-return');

			valid = true;
			
			if (solsoSelector.closest('form').length > 0) {
				valid = solsoSelector.closest('form').parsley().validate();
			}

			if (valid) {
				$.ajax({
					url: 	solsoFormAction,
					type: 	solsoFormMethod,
					data: 	solsoFormData,
					dataType: 'html',
					success:function(data) {
						if (data == 0) {
							$.growl.error({ title: 'ACCESS DENIEND', message: 'ACCESS DENIEND' });
						} else {			
							$('#' + returnTO).html(data);
							
							if ( $(data).find('.table').attr('data-alert') ) {
								var getError = $(data).find('.table').attr('data-alert');
							} else if ( $(data).closest('table').attr('data-alert') ) {
								var getError = $(data).closest('table').attr('data-alert');	
							} else {	
								var getError = $(data).find("[name='solsoStatus']").val();
							}
							
							if ( getError == '1' ) {
								$.growl.notice({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-success') });
							} else if ( getError == '2' ) {	
								$.growl.warning({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-warning') });
							} else {
								$.growl.error({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-error') });
							}
							
							if ( $(data).closest('table').attr('data-alert') ) {
								$('#ajaxTable').html(data);
								$('.solsoTable').dataTable();
							}		

							solsoUpload();	
							solsoShowEditor();
						}
					}
				});			
			}
			
			return false;
		});		
		


		$( document ).on('click', '.solsoShowModal', function(){
			modalTitle = $(this).attr('data-modal-title')

			$.ajax({
				url: $(this).attr('data-href'),
				dataType: 'html',
				success:function(data) {
					if (data == 0) {
						$.growl.error({ title: 'ACCESS DENIEND', message: 'ACCESS DENIEND' });
					} else {					
						$('.solsoModalTitle').text(modalTitle.toString());
						$('.solsoShowForm').html(data);
						showDatePicker();
						solsoShowEditor();
						
						if ($('.select2').length) {
							$('.select2').select2({
								closeOnSelect:false
							});
						}
					}
				}
			});		
		});
		
		$( document ).on('click', '.solsoSave', function(e){
			e.preventDefault();

			var solsoSelector	= $(this);
			var solsoFormAction = solsoSelector.closest('form').attr('action');
			var solsoFormMethod = solsoSelector.closest('form').attr('method');
			var solsoFormData	= solsoSelector.closest('form').serialize();	
			
			valid = solsoSelector.closest('form').parsley().validate();
			
			if (valid) {
				$.ajax({
					url: 	solsoFormAction,
					type: 	solsoFormMethod,
					data: 	solsoFormData,
					cache: 	false,
					dataType: 'html',
					success:function(data) {
						if (data == 0) {
							$.growl.error({ title: 'ACCESS DENIEND', message: 'ACCESS DENIEND' });
						} else {

							if ( $(data).closest('table').attr('data-alert') ) {
								var getError = $(data).closest('table').attr('data-alert');
							} else if ( $(data).find('.table').attr('data-alert') ) {
								var getError = $(data).find('.table').attr('data-alert');
							} else if ( $(data).closest('form').attr('data-alert') ){	
								var getError = $(data).closest('form').attr('data-alert');
							} else if ( $(data).closest('form').attr('data-alert') ) {	
								var getError = $(data).find('form').attr('data-alert');
							} else {	
								var getError = 0;
							}						

							if ( getError == '1' ) {
								$('#solsoCrudModal').modal('hide');
								$('#ajaxTable').html(data);
								$.growl.notice({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-success') });
							} else if ( getError == '2' )  {	
								$.growl.warning({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-warning') });
							} else if ( getError == '4' )  {	
								$('.solsoShowForm').html(data);
								$.growl.notice({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-success') });
							} else {
								$('.solsoShowForm').html(data);
								$.growl.error({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-error') });
							}
							
							$('.solsoTable').dataTable();
							showDatePicker();
							// $('.select2').select2();
						}
					}
				});	
			}
			
			return false;
		});			
		
		$( document ).on('click', '.solsoConfirm', function(){
			$("#solsoFormDelete").prop('action', $(this).attr('data-href'));
			
			if ($(this).attr('data-return')) {
				$("#solsoFormDelete").attr('data-return', $(this).attr('data-return'));;
			}
		});
		
		$( document ).on('click', '.solsoDelete', function(e){
			e.preventDefault();
			
			var solsoSelector	= $(this);
			var solsoFormAction = $('#solsoFormDelete').attr('action');
			
			if ($('#solsoFormDelete').attr('data-return')) {
				var returnTO = $('#solsoFormDelete').attr('data-return');
			}	
			
			$.ajax({
				url: 	solsoFormAction,
				type: 	'delete',
				cache: 	false,
				dataType: 'html',
				success:function(data) {
					$('#solsoDeleteModal').modal('hide');
					
					if (returnTO) {
						$('#' + returnTO).html(data);
					} else {	
						$('#ajaxTable').html(data);
						$('.solsoTable').dataTable();
						dataRefresh = solsoFormAction.split('/');
					}
					
					$.growl.notice({ title: solsoSelector.attr('data-message-title'), message: solsoSelector.attr('data-message-success') });
				}
			});	
			
			return false;
		});				
		
		$('#solsoCrudModal').on('hidden.bs.modal', function () {
			$.ajax({
				url: 	'invoice',
				type: 	'get',
				cache: 	false,
				dataType: 'html',
				success:function(data) {
					$('#ajaxTable').html(data);
					$('.solsoTable').dataTable();
				}
			});				
		});
		/* === END SETTINGS && MODALS && UPLOAD === */

		
		/* === CLONE ROW === */
		$(document).on('click', '#createClone', function(e) {
			$( '.solsoSelect2.solsoCloneSelect2').select2('destroy');
			
			$( '.solsoParent' )
				.append( '<tr>' + $( 'tr.solsoChild' ).html()  + '</tr>' );
		
			$( '.crt' ).each(function( index ) {
				$( this ).text(index+1);
			});			
			
			
			$("[name='products[]']").last().val('');
			$("[name='qty[]']").last().val('');
			$("[name='price[]']").last().val('');
			$( '.solsoCloneSelect2' ).select2();

			return false;
		});
		
		$( document ).on('click', '.removeClone', function() {
			
			if ( $('.removeClone').size() > 1 ) {
				$(this).parents().eq(1).remove();
			} else {
				$.growl.error({ title: 'ACCESS DENIEND', message: "YOU CAN'T DELETE ALL PRODUCTS !!!" });
			}
			
			$( '.crt' ).each(function( index ) {
				$( this ).text(index+1);
			});
			
			return false;
		});
		/* === END CLONE ROW === */	
		
		/* === INVOICE === */
		$( document ).on('change', '.solsoCloneSelect2', function() {
			inputPrice = $(this).closest('tr').find("[name='price[]']");
			
			$.ajax({
				url: "http://solutiisoft.com/inventory-system/get-product-price",
				type: 'post',
				dataType: 'json',
				data: { product: $(this).val() },
				success:function(price) {
					inputPrice.val(price);
				}
			});
		});		
		
		$( document ).on('change', '.solsoCurrencyEvent', function() {
			if ( $(this).val() != '') {
				$( '.solsoCurrency' ).text( $( "[name='currency'] option[value='" + $(this).val() + "']").text() );
			}
		});	
		
		$( document ).on("click change paste keyup", ".solsoEvent", function() {
			var qty			= $(this).closest('tr').find("[name='qty[]']").val();
			var price		= $(this).closest('tr').find("[name='price[]']").val();
			var invoiceType	= $(this).closest('tr').find("[name='invoiceDiscountType']").val();	
			var subTotal	= 0;
			var total		= 0;
			
			itemQty			= parseFloat(qty)  > 0 		? parseFloat(qty).toFixed(2) 		: 0;
			itemPrice		= parseFloat(price)  > 0 	? parseFloat(price).toFixed(2) 		: 0;
			
			subTotal		=  itemQty * itemPrice;
			
			$(this).closest('tr').find(".solsoSubTotal").text( subTotal.toFixed(2) );
			
			$( '.solsoSubTotal' ).each(function() {
				total += parseFloat($(this).text());
			});
			
			$( '.solsoTotal' ).text( (subTotal).toFixed(2) );
			
		});
		/* === END INVOICE === */		
		
		
		
		/* === SIDEBAR === */
		$('.toogle').on('click', function() {
			$('.body').toggleClass('slide');
			$('.sidebar').toggleClass('show');
			$('.toogle i').toggleClass('fa-chevron-left fa-chevron-right');
		});
		/* === END SIDEBAR === */	

		/* === ELEMENTS ===  */
		$('html').on('keypress', '.modal', function(e) {
		   if (e.keyCode == 13) {
			  return false;
		   }
		});		
		/* === END ELEMENTS ===  */
	</script>
	

</body></html>
